# Use a Flyway base image
FROM flyway/flyway

# Set the working directory for migrations
WORKDIR /flyway/sql

# Copy your migration scripts and the Flyway configuration file into the container
COPY ./internal/migration/scripts/* /flyway/sql/
COPY ./internal/migration/flyway.config /flyway/conf/

# Set the default command to run Flyway migrations using the configuration file
CMD ["flyway", "-configFiles=/flyway/conf/flyway.config", "migrate"]
